{"version":3,"file":"src/js/main.js","sources":["../../src/js/emitter/emitter.js","../../src/js/component/component.js","../../src/js/button/button.component.js","../../src/js/simple/simple.component.js","../../src/js/template/template.component.js","../../src/js/main.js"],"sourcesContent":["export default class Emitter {\r\n\r\n\tconstructor(options = {}) {\r\n\t\tObject.assign(this, options);\r\n\t\tthis.events = {};\r\n\t}\r\n\r\n\ton(type, callback) {\r\n\t\tconst event = (this.events[type] = this.events[type] || []);\r\n\t\tevent.push(callback);\r\n\t\treturn () => {\r\n\t\t\tthis.events[type] = event.filter(x => x !== callback);\r\n\t\t};\r\n\t}\r\n\r\n\toff(type, callback) {\r\n\t\tconst event = this.events[type];\r\n\t\tif (event) {\r\n\t\t\tthis.events[type] = event.filter(x => x !== callback);\r\n\t\t}\r\n\t}\r\n\r\n\temit(type, data) {\r\n\t\tconst event = this.events[type];\r\n\t\tif (event) {\r\n\t\t\tevent.forEach(callback => {\r\n\t\t\t\t// callback.call(this, data);\r\n\t\t\t\tcallback(data);\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst broadcast = this.events.broadcast;\r\n\t\tif (broadcast) {\r\n\t\t\tbroadcast.forEach(callback => {\r\n\t\t\t\tcallback(type, data);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import Emitter from \"../emitter/emitter\";\r\n\r\nexport default class Component extends Emitter {\r\n\r\n\tgetNode() {\r\n\t\tif (typeof this.render === 'function') {\r\n\t\t\tconst template = this.render();\r\n\t\t\tif (!template) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst div = document.createElement(\"div\");\r\n\t\t\tdiv.innerHTML = template;\r\n\t\t\tconst node = div.firstElementChild;\r\n\t\t\treturn node;\r\n\t\t}\r\n\t}\r\n\r\n\tsetNode(node) {\r\n\t\tconst template = this.getNode();\r\n\t\tif (template) {\r\n\t\t\tnode.parentNode.replaceChild(template, node);\r\n\t\t\tnode = template;\r\n\t\t}\r\n\t\tthis.node = node;\r\n\t\tif (typeof this.onInit === 'function') {\r\n\t\t\tthis.onInit(this.node);\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tif (typeof this.onDestroy === 'function') {\r\n\t\t\tthis.onDestroy(this.node);\r\n\t\t}\r\n\t}\r\n\r\n\t/*\r\n\trender() {\r\n\t\treturn `<div class=\"card--component\">\r\n\t\t\tI'm an ES6 component!\r\n\t\t</div>`;\r\n\t}\r\n\t*/\r\n}\r\n","import Component from \"../component/component\";\r\n\r\nexport default class ButtonComponent extends Component {\r\n\r\n\tonInit(node) {\r\n\t\tthis.onClick = this.onClick.bind(this);\r\n\t\tconst button = node.querySelector('.btn');\r\n\t\tbutton.addEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tonDestroy(node) {\r\n\t\tconst button = node.querySelector('.btn');\r\n\t\tbutton.removeEventListener('click', this.onClick);\r\n\t}\r\n\r\n\tonClick(event) {\r\n\t\tthis.emit('click', event);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn /* html */ `<div class=\"card--component\">\r\n\t\t\tI'm a ButtonComponent!<br />\r\n\t\t\t<button type=\"button\" class=\"btn\">Click Me!</button>\r\n\t\t</div>`;\r\n\t}\r\n\r\n}\r\n","import Component from \"../component/component\";\r\n\r\nexport default class SimpleComponent extends Component {\r\n\r\n\tonInit(node) {\r\n\t\tnode.innerHTML = `I'm a SimpleComponent!`;\r\n\t\tnode.classList.add('card--component', 'card--component-simple');\r\n\t}\r\n\r\n}\r\n","import Component from \"../component/component\";\r\n\r\nexport default class TemplateComponent extends Component {\r\n\r\n\trender() {\r\n\t\treturn /* html */ `<div class=\"card--component\">\r\n\t\t\tI'm a TemplateComponent!\r\n\t\t</div>`;\r\n\t}\r\n\r\n}\r\n","import ButtonComponent from './button/button.component';\r\nimport SimpleComponent from './simple/simple.component';\r\nimport TemplateComponent from './template/template.component';\r\n\r\nexport default class Main {\r\n\r\n\tconstructor() {\r\n\t\tconst components = this.addComponents();\r\n\r\n\t\t// const simpleComponents = this.addSimpleComponents();\r\n\t\t// const templateComponents = this.addTemplateComponents();\r\n\t\t// const buttonComponents = this.addButtonComponents();\r\n\t}\r\n\r\n\taddComponents() {\r\n\t\tconst SELECTORS = {\r\n\t\t\t'[simple-component]': SimpleComponent,\r\n\t\t\t'[template-component]': TemplateComponent,\r\n\t\t\t'[button-component]': ButtonComponent,\r\n\t\t};\r\n\t\tlet instances = [];\r\n\t\tfor (let key in SELECTORS) {\r\n\t\t\tinstances = instances.concat(Array.from(document.querySelectorAll(key))\r\n\t\t\t\t.map(node => {\r\n\t\t\t\t\tconst instance = new SELECTORS[key]().setNode(node);\r\n\t\t\t\t\tinstance.on('click', () => {\r\n\t\t\t\t\t\talert('clicked');\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn instance;\r\n\t\t\t\t}));\r\n\t\t}\r\n\t\tinstances.forEach(x => console.log(x));\r\n\t\treturn instances;\r\n\t}\r\n\r\n\t/*\r\n\taddSimpleComponents() {\r\n\t\tconst instances = Array.from(document.querySelectorAll('[simple-component]'))\r\n\t\t\t.map(node => new SimpleComponent().setNode(node));\r\n\t\tconsole.log('Main.addSimpleComponents', instances);\r\n\t\treturn instances;\r\n\t}\r\n\r\n\taddTemplateComponents() {\r\n\t\tconst instances = Array.from(document.querySelectorAll('[template-component]'))\r\n\t\t\t.map(node => new TemplateComponent().setNode(node));\r\n\r\n\t\tconsole.log('Main.addTemplateComponents', instances);\r\n\t\treturn instances;\r\n\t}\r\n\r\n\taddButtonComponents() {\r\n\t\tconst instances = Array.from(document.querySelectorAll('[button-component]'))\r\n\t\t\t.map(node => {\r\n\t\t\t\tconst instance = new ButtonComponent().setNode(node);\r\n\t\t\t\tinstance.on('click', () => {\r\n\t\t\t\t\talert('clicked');\r\n\t\t\t\t});\r\n\t\t\t\treturn instance;\r\n\t\t\t});\r\n\r\n\t\tconsole.log('Main.addButtonComponents', instances);\r\n\t\treturn instances;\r\n\t}\r\n\t*/\r\n\r\n}\r\n\r\nconst main = new Main();\r\n"],"names":["Emitter","options","Object","assign","events","on","type","callback","event","push","filter","x","off","emit","data","forEach","broadcast","Component","getNode","render","template","div","document","createElement","innerHTML","node","firstElementChild","setNode","parentNode","replaceChild","onInit","destroy","onDestroy","ButtonComponent","onClick","bind","button","querySelector","addEventListener","removeEventListener","SimpleComponent","classList","add","TemplateComponent","Main","components","addComponents","SELECTORS","instances","key","concat","Array","from","querySelectorAll","map","instance","alert","console","log","main"],"mappings":"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"}